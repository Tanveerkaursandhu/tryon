<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RIYASAT-E-LIBAS TRY-ON</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1 class="brand">RIYASAT-E-LIBAS</h1>
  <p class="instructions">Move closer to align with outfit ðŸ‘—</p>

  <video id="camera" autoplay playsinline></video>
<img id="outfit" src="outfit.png" alt="Outfit">


  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
  <script src="script.js"></script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RIYASAT-E-LIBAS TRY-ON</title>
  <style>
    html, body { margin:0; padding:0; height:100%; overflow:hidden; background:black; font-family: "Poppins", sans-serif; }
    .brand { position:absolute; top:15px; width:100%; font-size:1.8rem; font-weight:bold; letter-spacing:3px; color:white; text-shadow:0 0 8px gold; z-index:3; text-align:center; }
    .instructions { position:absolute; top:60px; width:100%; text-align:center; font-size:1rem; color:#ffd; z-index:3; }
    #camera { position:fixed; top:0; left:0; width:100%; height:100%; object-fit:cover; z-index:0; background:black; }
    #outfit { position:absolute; bottom:5%; left:50%; transform:translateX(-50%); height:85vh; z-index:2; opacity:0.95; }
  </style>
</head>
<body>
  <h1 class="brand">RIYASAT-E-LIBAS</h1>
  <p class="instructions">Move closer to align with outfit ðŸ‘—</p>
  <video id="camera" autoplay playsinline></video>
  <img id="outfit" src="outfit.png" alt="Outfit">

  <!-- MediaPipe Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

  <script>
    const video = document.getElementById('camera');
    const outfit = document.getElementById('outfit');

    // Start camera
    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode:"user" } });
        video.srcObject = stream;
      } catch(e) {
        alert("Camera access required!");
        console.error(e);
      }
    }

    document.body.addEventListener('click', () => {
      startCamera();
      initPose();
      document.querySelector('.instructions').textContent = "Align yourself with the outfit ðŸ‘—";
    }, { once: true });

    // MediaPipe Pose
    function initPose() {
      const pose = new Pose.Pose({ locateFile: (file) => https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file} });
      pose.setOptions({ modelComplexity: 1, smoothLandmarks: true, minDetectionConfidence: 0.5, minTrackingConfidence: 0.5 });

      pose.onResults(results => {
        if (!results.poseLandmarks) return;

        const lm = results.poseLandmarks;
        const leftShoulder = lm[11];
        const rightShoulder = lm[12];
        const leftHip = lm[23];
        const rightHip = lm[24];

        // Upper body center
        const centerX = ((leftShoulder.x + rightShoulder.x)/2) * window.innerWidth;
        const centerY = ((leftShoulder.y + rightShoulder.y)/2) * window.innerHeight;
        const shoulderWidth = Math.abs(leftShoulder.x - rightShoulder.x) * window.innerWidth;
        const torsoHeight = Math.abs(((leftShoulder.y + rightShoulder.y)/2) - ((leftHip.y + rightHip.y)/2)) * window.innerHeight;

        outfit.style.left = ${centerX}px;
        outfit.style.top = ${centerY - torsoHeight*0.4}px;
        outfit.style.transform = translate(-50%,0) scale(${shoulderWidth/200});
      });

      const cam = new Camera(video, { onFrame: async () => { await pose.send({image: video}); }, width:640, height:480 });
      cam.start();
    }
  </script>
</body>
</html>
